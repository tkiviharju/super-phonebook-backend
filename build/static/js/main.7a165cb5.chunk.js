(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=(n(19),n(2)),i=n(3),l=n.n(i),m="http://localhost:3001/api/persons",f=function(){return l.a.get(m)},d=function(e){return l.a.post(m,e)},s=function(e,t){return l.a.put("".concat(m,"/").concat(t),e)},h=function(e){return l.a.delete("".concat(m,"/").concat(e))},b=function(e){var t=e.notification,n=e.error;return r.a.createElement("div",{className:"notification ".concat(n?"error":"")},t)},p=function(e){var t=e.filter,n=e.handleFilterChange;return r.a.createElement("p",null,"filter shown with",r.a.createElement("input",{value:t,onChange:n}))},v=function(e){var t=e.persons,n=e.filter,a=e.handleDelete;return r.a.createElement(r.a.Fragment,null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).sort((function(e,t){return e.name<t.name?-1:1})).map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{name:e.id,onClick:a},"Delete"))})))},E=function(e){var t=e.handleSubmit,n=e.handleChange,a=e.newName,o=e.newNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,name:"name",onChange:n}),"number: ",r.a.createElement("input",{value:o,name:"number",onChange:n})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},w=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),l=i[0],m=i[1],w=Object(a.useState)(""),g=Object(u.a)(w,2),C=g[0],j=g[1],O=Object(a.useState)(""),S=Object(u.a)(O,2),k=S[0],y=S[1],D=Object(a.useState)(""),L=Object(u.a)(D,2),N=L[0],F=L[1],I=Object(a.useState)(!1),A=Object(u.a)(I,2),J=A[0],x=A[1];Object(a.useEffect)((function(){f().then((function(e){return o(e.data)}))}),[]);var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("errorrrr",e),console.log(typeof e),F(e),t&&x(!0),setTimeout((function(){F(""),t&&x(!1)}),5e3)},P=function(){j(""),m("")};return r.a.createElement("div",null,N&&r.a.createElement(b,{notification:N,error:J}),r.a.createElement("h1",null,"Phonebook"),r.a.createElement(p,{filter:k,handleFilterChange:function(e){return y(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(E,{handleSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toLowerCase()===l.toLowerCase()}));if(t&&C&&window.confirm("".concat(l," is already added to phonebooke, replace the old number with a new one?"))){var a={name:l,number:C},r=t.id;s(a,r).then((function(e){B("Updated ".concat(l));var t=n.filter((function(e){return e.name.toLowerCase()!==l.toLowerCase()})).concat(e.data);o(t),P()})).catch((function(){return B("Failed to update ".concat(l,"'s information to phonebook"),!0)}))}else if(l&&C){d({name:l,number:C}).then((function(e){B("Added ".concat(l)),o(n.concat(e.data)),P()})).catch((function(){return B("Failed to add ".concat(l," to phonebook"),!0)}))}},handleChange:function(e){return"name"===e.target.name?m(e.target.value):j(e.target.value)},newNumber:C,newName:l}),r.a.createElement("h2",null,"Numbers"),n.length>0&&r.a.createElement(v,{persons:n,handleDelete:function(e){var t=parseInt(e.target.name),a=n.find((function(e){return e.id===t}));window.confirm("Delete ".concat(a.name,"?"))&&h(t).then((function(){B("Deleted ".concat(a.name));var e=n.filter((function(e){return e.id!==t}));o(e)})).catch((function(){return B("Information of ".concat(a.name," has already been removed from server"),!0)}))},filter:k}))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.7a165cb5.chunk.js.map