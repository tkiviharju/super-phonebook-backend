{"version":3,"sources":["services/persons.js","Notification.jsx","Filter.jsx","PersonList.jsx","Form.jsx","App.js","index.js"],"names":["url","axios","get","person","post","id","put","delete","Notification","notification","error","className","Filter","filter","handleFilterChange","value","onChange","PersonList","persons","handleDelete","name","toLowerCase","includes","sort","p1","p2","map","key","number","onClick","Form","handleSubmit","handleChange","newName","newNumber","onSubmit","type","App","useState","setPersons","setNewName","setNewNumber","setFilter","setNotification","setError","useEffect","personService","then","result","data","handleNotification","text","_error","console","log","setTimeout","resetInputs","event","target","preventDefault","personWithSameName","find","window","confirm","updatedPerson","response","newPersons","concat","catch","length","parseInt","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7a165cb5.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst url = 'http://localhost:3001/api/persons';\n\nconst getAll = () => axios.get(url);\n\nconst create = person => axios.post(url, person);\n\nconst update = (person, id) => axios.put(`${url}/${id}`, person);\n\nconst deletePerson = id => axios.delete(`${url}/${id}`)\n\nexport default {\n\tgetAll, \n\tcreate,\n\tupdate,\n\tdeletePerson\n}","import React from 'react';\n\nconst Notification = ({notification, error}) => {\n\treturn (<div className={`notification ${error ? 'error' : ''}`}>\n\t\t{notification}\n\t</div>);\n}\n\nexport default Notification;","import React from 'react';\n\nconst Filter = ({ filter, handleFilterChange}) => (\n\t<p>\n\t\tfilter shown with\n\t\t<input value={filter} onChange={handleFilterChange}/>\n\t</p>\n);\n\nexport default Filter;","import React from 'react';\n\nconst PersonList = ({ persons, filter, handleDelete }) => (\n\t<>\n\t\t{persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\t\t\t\t\t.sort((p1, p2) => p1.name < p2.name ? -1 : 1)\n\t\t\t\t\t.map(person => <div key={person.id}>{person.name} {person.number} <button name={person.id} onClick={handleDelete}>Delete</button></div>)\n\t\t\t}\n\t</>\n\t\n);\n\nexport default PersonList;","import React from 'react';\n\nconst Form = ({ handleSubmit, handleChange, newName, newNumber }) => (\n\t<form onSubmit={handleSubmit}>\n\t<div>\n\t\t  name: <input value={newName} name='name' onChange={handleChange}/>\n\t\t  number: <input value={newNumber} name='number' onChange={handleChange}/>\n\t</div>\n\t<div>\n\t\t<button type=\"submit\">add</button>\n\t</div>\n\t</form>\n\n);\n\nexport default Form;","import React, { useState, useEffect } from 'react';\n\nimport personService from './services/persons';\nimport Notification from './Notification.jsx';\nimport Filter from './Filter.jsx';\nimport PersonList from './PersonList.jsx';\nimport Form from './Form';\n\n\nconst App = () => {\n\tconst [ persons, setPersons] = useState([]);\n\tconst [ newName, setNewName ] = useState('');\n\tconst [ newNumber, setNewNumber ] = useState('');\n\tconst [ filter, setFilter ] = useState('');\n\tconst [ notification, setNotification ] = useState('');\n\tconst [ error, setError ] = useState(false);\n\n\tuseEffect(() => {\n\t\tpersonService\n\t\t\t.getAll()\n\t\t\t.then(result => setPersons(result.data));\n\t}, []);\n\n\n\tconst handleNotification = (text, _error = false) => {\n\t\tconsole.log('errorrrr', text)\n\t\tconsole.log(typeof text)\n\t\tsetNotification(text);\n\t\t_error && setError(true);\n\t\tsetTimeout(() => {\n\t\t\tsetNotification('');\n\t\t\t_error && setError(false);\n\t\t}, 5000)\n\t}\n\n\tconst handleChange = (event) => event.target.name === 'name' ? setNewName(event.target.value) : setNewNumber(event.target.value);\n\n\tconst handleFilterChange = (event) => setFilter(event.target.value); \n\n\tconst resetInputs = () => {\n\t\tsetNewNumber('');\n\t\tsetNewName('');\n\t}\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconst personWithSameName = persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n\t\tif (personWithSameName && newNumber && window.confirm(`${newName} is already added to phonebooke, replace the old number with a new one?`)){\n\t\t\tconst updatedPerson = {name: newName, number: newNumber}\n\t\t\tconst { id } = personWithSameName;\n\t\t\tpersonService\n\t\t\t\t.update(updatedPerson, id)\n\t\t\t\t.then(response => {\n\t\t\t\t\thandleNotification(`Updated ${newName}`);\n\t\t\t\t\tconst newPersons = persons\n\t\t\t\t\t\t.filter(person => person.name.toLowerCase() !== newName.toLowerCase())\n\t\t\t\t\t\t.concat(response.data);\n\t\t\t\t\tsetPersons(newPersons);\n\t\t\t\t\tresetInputs();\n\t\t\t\t})\n\t\t\t\t.catch(() => handleNotification(`Failed to update ${newName}'s information to phonebook`, true))\n\t\t} else if (newName && newNumber){\n\t\t\tconst newPerson = {name: newName, number: newNumber}\n\t\t\tpersonService\n\t\t\t\t.create(newPerson)\n\t\t\t\t.then(response => {\n\t\t\t\t\thandleNotification(`Added ${newName}`);\n\t\t\t\t\tsetPersons(persons.concat(response.data));\n\t\t\t\t\tresetInputs();\n\t\t\t\t})\n\t\t\t\t.catch(() => handleNotification(`Failed to add ${newName} to phonebook`, true))\n\t\t}\n\t}\n\n\tconst handleDelete = (event) => {\n\t\tconst id = parseInt(event.target.name);\n\t\tconst personToDelete = persons.find(person => person.id === id);\n\t\tif (window.confirm(`Delete ${personToDelete.name}?`)){\n\t\t\tpersonService\n\t\t\t\t.deletePerson(id)\n\t\t\t\t.then(() => {\n\t\t\t\t\thandleNotification(`Deleted ${personToDelete.name}`);\n\t\t\t\t\tconst newPersons = persons.filter(person => person.id !== id);\n\t\t\t\t\tsetPersons(newPersons);\n\t\t\t\t})\n\t\t\t\t.catch(() => handleNotification(`Information of ${personToDelete.name} has already been removed from server`, true));\n\t\t\t}\n\t\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{notification && <Notification notification={notification} error={error}/>}\n\t\t\t<h1>Phonebook</h1>\n\n\t\t\t<Filter filter={filter} handleFilterChange={handleFilterChange} />\n\n\t\t\t<h2>Add a new</h2>\n\t\t\t<Form handleSubmit={handleSubmit} handleChange={handleChange} newNumber={newNumber} newName={newName} />\n\t\t\n\t\t\t<h2>Numbers</h2>\n\t\t\t{persons.length > 0 && <PersonList persons={persons} handleDelete={handleDelete} filter={filter} />}\n\t\t</div>\n\t);\n\n}\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}